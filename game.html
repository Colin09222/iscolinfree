<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COLIN // GAME</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Share Tech Mono', monospace;
            background: linear-gradient(180deg, #0a0a0a 0%, #000 100%);
            color: #ccc;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            overflow-x: hidden;
        }
        
        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            color: #00ff41;
            text-shadow: 0 0 20px rgba(0,255,65,0.5);
            letter-spacing: 3px;
            margin-bottom: 8px;
        }
        
        .nav {
            display: flex;
            gap: 10px;
            margin-bottom: 8px;
        }
        
        .nav-btn {
            padding: 6px 14px;
            background: transparent;
            border: 1px solid #1a1a1a;
            color: #666;
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.8rem;
            cursor: pointer;
            text-decoration: none;
        }
        
        .nav-btn:hover, .nav-btn.active {
            border-color: #00ff41;
            color: #00ff41;
        }
        
        #gameCanvas {
            border: 3px solid #00ff41;
            box-shadow: 0 0 30px rgba(0,255,65,0.4);
            border-radius: 8px;
            background: #000;
            max-width: 95vw;
            max-height: 65vh;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            width: 900px;
            max-width: 95vw;
            margin-top: 8px;
            font-family: 'Orbitron', sans-serif;
            color: #00ff41;
            font-size: 1rem;
        }
        
        #startBtn {
            margin-top: 10px;
            padding: 10px 25px;
            background: transparent;
            border: 2px solid #00ff41;
            color: #00ff41;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 5px;
        }
        
        #startBtn:hover {
            background: #00ff41;
            color: #000;
        }
        
        .instructions {
            margin-top: 8px;
            color: #666;
            font-size: 0.75rem;
            text-align: center;
        }
        
        .instructions span { color: #00ff41; }
        
        #overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.95);
            z-index: 1000;
            overflow: hidden;
        }
        
        .overlay-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        
        .overlay-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            margin-bottom: 20px;
        }
        
        .overlay-title.win { color: gold; text-shadow: 0 0 30px gold; }
        .overlay-title.lose { color: #ff3333; text-shadow: 0 0 30px #ff3333; }
        
        #overlayBtn {
            padding: 15px 40px;
            border: none;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            cursor: pointer;
            border-radius: 8px;
            background: #00ff41;
            color: #000;
        }
        
        .spam-img {
            position: absolute;
            width: 200px;
            border: 3px solid gold;
            border-radius: 8px;
            animation: pop 0.3s ease-out;
        }
        
        .spam-text {
            position: absolute;
            font-family: 'Orbitron', sans-serif;
            color: gold;
            text-shadow: 0 0 15px gold;
            animation: pop 0.3s ease-out;
            white-space: nowrap;
        }
        
        @keyframes pop {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }
        
        .mobile-controls {
            display: none;
            margin-top: 10px;
            flex-direction: column;
            gap: 5px;
        }
        
        .control-btn {
            width: 50px;
            height: 50px;
            background: rgba(0,255,65,0.2);
            border: 2px solid #00ff41;
            color: #00ff41;
            font-size: 1.3rem;
            cursor: pointer;
            border-radius: 8px;
        }
        
        .control-row {
            display: flex;
            justify-content: center;
            gap: 5px;
        }
        
        @media (max-width: 950px) {
            .mobile-controls { display: flex; }
            .game-info { font-size: 0.85rem; }
            .logo { font-size: 1rem; }
        }
    </style>
</head>
<body>
    <div class="logo">COLIN // ARCADE</div>
    
    <nav class="nav">
        <a href="index.html" class="nav-btn">STATUS</a>
        <a href="fort.html" class="nav-btn">FORT?</a>
        <a href="game.html" class="nav-btn active">GAME</a>
    </nav>
    
    <canvas id="gameCanvas" width="900" height="650"></canvas>
    
    <div class="game-info">
        <div>SCORE: <span id="score">0</span></div>
        <div>DOTS: <span id="dots">0</span></div>
        <div>LIVES: <span id="lives">3</span></div>
    </div>
    
    <button id="startBtn">START GAME</button>
    
    <div class="instructions">
        <span>ARROW KEYS</span> to move // Collect all green dots // Avoid the ghost!
    </div>
    
    <div class="mobile-controls">
        <div class="control-row"><button class="control-btn" id="btnUp">↑</button></div>
        <div class="control-row">
            <button class="control-btn" id="btnLeft">←</button>
            <button class="control-btn" id="btnDown">↓</button>
            <button class="control-btn" id="btnRight">→</button>
        </div>
    </div>
    
    <div id="overlay">
        <div class="overlay-content">
            <div class="overlay-title" id="overlayTitle"></div>
            <button id="overlayBtn">PLAY AGAIN</button>
        </div>
    </div>
    
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const W = canvas.width;
        const H = canvas.height;
        
        // Images
        const playerImg = new Image();
        playerImg.src = 'https://i.imgur.com/rhnf67d.jpeg';
        
        const ghostImg = new Image();
        ghostImg.src = 'https://i.imgur.com/MSSXjCV.jpeg';
        
        const winImage = 'https://i.imgur.com/w5P8pYn.jpeg';
        
        // Ghost quotes - only these
        const ghostQuotes = [
            "god dammit jordan!",
            "Go Phils!",
            "I'm not racist, but..",
            "Kenny did nothing wrong",
            "Fort?",
            "Fort anyone?",
            "Anyone down for fort?"
        ];
        
        // Game state
        let player, ghost, dots, score, lives, gameActive, keysDown;
        let ghostQuote = "";
        let quoteTimer = 0;
        
        const PLAYER_SIZE = 105;  // Reduced by half (was 210)
        const GHOST_SIZE = 105;   // Reduced by half (was 210)
        const DOT_SIZE = 18;
        const PLAYER_SPEED = 5;
        const GHOST_SPEED = 2.5;
        const TOTAL_DOTS = 12;
        
        function init() {
            player = { x: 120, y: 120 };
            ghost = { x: W - 150, y: H - 150 };
            dots = [];
            score = 0;
            lives = 3;
            keysDown = {};
            ghostQuote = ghostQuotes[Math.floor(Math.random() * ghostQuotes.length)];
            quoteTimer = 0;
            
            // Create dots
            while (dots.length < TOTAL_DOTS) {
                const x = Math.random() * (W - 80) + 40;
                const y = Math.random() * (H - 80) + 40;
                
                const distPlayer = Math.sqrt((x - 120) ** 2 + (y - 120) ** 2);
                const distGhost = Math.sqrt((x - (W - 150)) ** 2 + (y - (H - 150)) ** 2);
                
                if (distPlayer > 180 && distGhost > 180) {
                    dots.push({ x, y });
                }
            }
            
            updateUI();
        }
        
        function updateUI() {
            document.getElementById('score').textContent = score;
            document.getElementById('dots').textContent = dots.length;
            document.getElementById('lives').textContent = lives;
        }
        
        function update() {
            if (!gameActive) return;
            
            // Player movement
            if (keysDown['ArrowLeft'] || keysDown['a']) player.x -= PLAYER_SPEED;
            if (keysDown['ArrowRight'] || keysDown['d']) player.x += PLAYER_SPEED;
            if (keysDown['ArrowUp'] || keysDown['w']) player.y -= PLAYER_SPEED;
            if (keysDown['ArrowDown'] || keysDown['s']) player.y += PLAYER_SPEED;
            
            // Keep player in bounds
            player.x = Math.max(PLAYER_SIZE/2, Math.min(W - PLAYER_SIZE/2, player.x));
            player.y = Math.max(PLAYER_SIZE/2, Math.min(H - PLAYER_SIZE/2, player.y));
            
            // Ghost chases player
            const dx = player.x - ghost.x;
            const dy = player.y - ghost.y;
            const dist = Math.sqrt(dx * dx + dy * dy);
            
            if (dist > 0) {
                ghost.x += (dx / dist) * GHOST_SPEED;
                ghost.y += (dy / dist) * GHOST_SPEED;
            }
            
            // Update ghost quote timer
            quoteTimer++;
            if (quoteTimer > 180) {
                ghostQuote = ghostQuotes[Math.floor(Math.random() * ghostQuotes.length)];
                quoteTimer = 0;
            }
            
            // Check dot collection
            for (let i = dots.length - 1; i >= 0; i--) {
                const d = dots[i];
                const dotDist = Math.sqrt((player.x - d.x) ** 2 + (player.y - d.y) ** 2);
                if (dotDist < PLAYER_SIZE/2 + DOT_SIZE) {
                    dots.splice(i, 1);
                    score += 10;
                    updateUI();
                }
            }
            
            // Check win
            if (dots.length === 0) {
                win();
                return;
            }
            
            // Check ghost collision
            const ghostDist = Math.sqrt((player.x - ghost.x) ** 2 + (player.y - ghost.y) ** 2);
            if (ghostDist < (PLAYER_SIZE + GHOST_SIZE) / 2 - 15) {
                lives--;
                updateUI();
                
                if (lives <= 0) {
                    lose();
                } else {
                    player.x = 120;
                    player.y = 120;
                    ghost.x = W - 150;
                    ghost.y = H - 150;
                }
            }
        }
        
        function draw() {
            // Clear
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, W, H);
            
            // Draw grid lines
            ctx.strokeStyle = '#0a1a0a';
            ctx.lineWidth = 1;
            for (let i = 0; i < W; i += 50) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, H);
                ctx.stroke();
            }
            for (let i = 0; i < H; i += 50) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(W, i);
                ctx.stroke();
            }
            
            // Draw dots
            dots.forEach(d => {
                ctx.fillStyle = '#00ff41';
                ctx.shadowColor = '#00ff41';
                ctx.shadowBlur = 15;
                ctx.beginPath();
                ctx.arc(d.x, d.y, DOT_SIZE, 0, Math.PI * 2);
                ctx.fill();
                ctx.shadowBlur = 0;
            });
            
            // Draw ghost
            if (ghostImg.complete) {
                ctx.save();
                ctx.beginPath();
                ctx.arc(ghost.x, ghost.y, GHOST_SIZE/2, 0, Math.PI * 2);
                ctx.clip();
                ctx.drawImage(ghostImg, ghost.x - GHOST_SIZE/2, ghost.y - GHOST_SIZE/2, GHOST_SIZE, GHOST_SIZE);
                ctx.restore();
                
                ctx.strokeStyle = '#ff0000';
                ctx.lineWidth = 4;
                ctx.shadowColor = '#ff0000';
                ctx.shadowBlur = 15;
                ctx.beginPath();
                ctx.arc(ghost.x, ghost.y, GHOST_SIZE/2, 0, Math.PI * 2);
                ctx.stroke();
                ctx.shadowBlur = 0;
                
                // Draw speech bubble (smaller)
                const bubbleX = ghost.x;
                const bubbleY = ghost.y - GHOST_SIZE/2 - 35;
                
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.roundRect(bubbleX - 80, bubbleY - 18, 160, 30, 8);
                ctx.fill();
                
                ctx.beginPath();
                ctx.moveTo(bubbleX - 8, bubbleY + 12);
                ctx.lineTo(bubbleX, bubbleY + 25);
                ctx.lineTo(bubbleX + 8, bubbleY + 12);
                ctx.fill();
                
                ctx.fillStyle = '#000';
                ctx.font = 'bold 14px Share Tech Mono';
                ctx.textAlign = 'center';
                ctx.fillText(ghostQuote, bubbleX, bubbleY + 3);
            }
            
            // Draw player
            if (playerImg.complete) {
                ctx.save();
                ctx.beginPath();
                ctx.arc(player.x, player.y, PLAYER_SIZE/2, 0, Math.PI * 2);
                ctx.clip();
                ctx.drawImage(playerImg, player.x - PLAYER_SIZE/2, player.y - PLAYER_SIZE/2, PLAYER_SIZE, PLAYER_SIZE);
                ctx.restore();
                
                ctx.strokeStyle = '#00ff41';
                ctx.lineWidth = 4;
                ctx.shadowColor = '#00ff41';
                ctx.shadowBlur = 15;
                ctx.beginPath();
                ctx.arc(player.x, player.y, PLAYER_SIZE/2, 0, Math.PI * 2);
                ctx.stroke();
                ctx.shadowBlur = 0;
            }
        }
        
        function gameLoop() {
            if (!gameActive) return;
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }
        
        function start() {
            init();
            gameActive = true;
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
            gameLoop();
        }
        
        function win() {
            gameActive = false;
            
            const overlay = document.getElementById('overlay');
            overlay.style.display = 'block';
            
            const oldImgs = overlay.querySelectorAll('.spam-img, .spam-text');
            oldImgs.forEach(el => el.remove());
            
            document.getElementById('overlayTitle').textContent = '';
            document.getElementById('overlayTitle').className = 'overlay-title win';
            
            for (let i = 0; i < 18; i++) {
                setTimeout(() => {
                    const img = document.createElement('img');
                    img.src = winImage;
                    img.className = 'spam-img';
                    img.style.left = Math.random() * (window.innerWidth - 220) + 'px';
                    img.style.top = Math.random() * (window.innerHeight - 200) + 'px';
                    overlay.appendChild(img);
                    
                    const txt = document.createElement('div');
                    txt.className = 'spam-text';
                    txt.textContent = 'Cignetti type shit!!';
                    txt.style.left = Math.random() * (window.innerWidth - 280) + 'px';
                    txt.style.top = Math.random() * (window.innerHeight - 60) + 'px';
                    txt.style.fontSize = (Math.random() * 1.8 + 1.2) + 'rem';
                    overlay.appendChild(txt);
                }, i * 90);
            }
        }
        
        function lose() {
            gameActive = false;
            
            const overlay = document.getElementById('overlay');
            overlay.style.display = 'block';
            
            const oldImgs = overlay.querySelectorAll('.spam-img, .spam-text');
            oldImgs.forEach(el => el.remove());
            
            document.getElementById('overlayTitle').textContent = 'GAME OVER';
            document.getElementById('overlayTitle').className = 'overlay-title lose';
        }
        
        // Keyboard controls
        document.addEventListener('keydown', e => {
            if (['ArrowUp','ArrowDown','ArrowLeft','ArrowRight','w','a','s','d'].includes(e.key)) {
                e.preventDefault();
                keysDown[e.key] = true;
            }
        });
        
        document.addEventListener('keyup', e => {
            keysDown[e.key] = false;
        });
        
        // Mobile controls
        function setupMobileBtn(id, key) {
            const btn = document.getElementById(id);
            btn.addEventListener('mousedown', () => { keysDown[key] = true; });
            btn.addEventListener('mouseup', () => { keysDown[key] = false; });
            btn.addEventListener('mouseleave', () => { keysDown[key] = false; });
            btn.addEventListener('touchstart', e => { e.preventDefault(); keysDown[key] = true; });
            btn.addEventListener('touchend', e => { e.preventDefault(); keysDown[key] = false; });
        }
        
        setupMobileBtn('btnUp', 'ArrowUp');
        setupMobileBtn('btnDown', 'ArrowDown');
        setupMobileBtn('btnLeft', 'ArrowLeft');
        setupMobileBtn('btnRight', 'ArrowRight');
        
        // Buttons
        document.getElementById('startBtn').addEventListener('click', start);
        document.getElementById('overlayBtn').addEventListener('click', start);
        
        // Initial draw
        function initialDraw() {
            init();
            draw();
        }
        
        playerImg.onload = initialDraw;
        ghostImg.onload = initialDraw;
        setTimeout(initialDraw, 500);
    </script>
</body>
</html>
